## 延迟队列
延迟队列一般分为两种：  
- 基于消息的延迟和基于队列的延迟。基于消息的延迟是指为每条消息设置不同的延迟时间，那么每当队列中有新消息进入的时候就会重新根据延迟时间排序，当然这也会对性能造成极大的影响。
- 实际应用中大多采用基于队列的延迟，设置不同延迟级别的队列，比如 5s、10s、30s、1min、5mins、10mins 等，每个队列中消息的延迟时间都是相同的，这样免去了延迟排序所要承受的性能之苦，通过一定的扫描策略（比如定时）即可投递超时的消息。

> 参考文档：https://juejin.im/post/5acf29316fb9a028cb2e04ce

## 问题
1. 如何解决同一个队列里，消息过期时间不同的问题？比如第一个延迟时间是10s，第二个延迟是1s，那么第二个消息要等到第一个消息执行完才会执行第二个，那个么第二个的延迟就是10s，而不是1s
    - 可以通过设置队列消息ttl来解决